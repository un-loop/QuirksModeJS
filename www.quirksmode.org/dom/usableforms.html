<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html lang="en">
<!-- Mirrored from www.quirksmode.org/dom/usableforms.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 22 Sep 2017 17:30:10 GMT -->
<head><title>Javascript - Usable forms</title><link rel="stylesheet" href="../quirksmode.css" /><link rel="up" href="contents.html" /><link rel="intro" href="intro.html" /><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><script type="text/javascript" src="../quirksmode.js"></script><script type="text/javascript" src="usableforms.js"></script><style type="text/css"><!--table.example {	margin-left: 10%;}td {	padding: 5px;}td.question {	width: 200px;}td p {	margin: 0;}li pre {	margin-bottom: 50px;	margin-left: 0;}--></style></head><body bgcolor="#ffffff"><h2>Usable forms</h2><div id="header"></div><div class="floater"><p>Usable Forms is one of the eight example scripts in <a href="https://www.quirksmode.org/book/">the book</a>.</p><p>There's a bug that prevents the script from working with multiple selects. (Single selects work fine, though).</p><p>If you reload this page you'll notice that Mozilla checks the radio button above the one thatwas checked before the reload. This is in fact <a href="https://www.quirksmode.org/bugreports/archives/2005/11/radio_check_mov.html">a browser bug</a>,and not a bug in my script.</p><p>Clicking on the <code>label</code>s doesn't work in Safari.</p><p>I have heard, but did not test, that if you hide the submit button and reinsert it into the form later on, itdoes not work in Firefox.</p></div><p class="intro">On this page I present my the Usable Forms script. This scriptis meant to show and hide form fields based on user actions, and thus to significantly increasethe usability of large and complicated forms.<br />I explain the whys and wherefores of this script in great detail in my May 2003 Digital Web Magazine article<a href="http://www.digital-web.com/articles/forms_usability_and_the_w3c_dom/"	class="external">Forms, usability, and the W3C DOM</a>.</p><p>The article discusses version 1.0, but I advise you to download a newer version.</p><h3>Example</h3><p>The script adds and removes form fields based on user actions. Try the form below.</p><form action="https://www.quirksmode.org/cgi-bin/show_params.cgi"><table class="example"><tbody><!-- Safari requires TBODY -->	<tr>		<td class="question"><label for="name">Name</label></td>		<td><input name="name" id="name" /></td>	</tr>	<tr>		<td class="question"><label for="address">Address</label></td>		<td><input name="address" id="address" /></td>	</tr>	<tr>		<td class="question"><label for="country_other">Country</label></td>		<td>			<input type="checkbox" name="country_other" id="country_other" rel="other_country" /> Other than The Netherlands		</td>	</tr>	<tr rel="other_country">		<td class="question"><label for="other_country"><span class="accessibility">If not the Netherlands:</span> Which other country?</label></td>		<td><input name="other_country" id="other_country" /></td>	</tr>	<tr>		<td class="question">Marital status</td>		<td>			<input type="radio" name="marital" value="single" rel="none" id="marital_single" /> <label for="marital_single">Single</label><br />			<input type="radio" name="marital" value="married" rel="marriageContract" id="marital_married" /> <label for="marital_married">Married</label><br />			<input type="radio" name="marital" value="divorced" rel="divorceDetails" id="marital_divorced" /> <label for="marital_divorced">Divorced</label><br />		</td>	</tr>	<tr rel="marriageContract">		<td class="question"><label for="marriage_contract"><span class="accessibility">If Married:</span> Marriage contract?</label></td>		<td><input type="checkbox" name="marriage_contract" id="marriage_contract" /> Yes</td>	</tr>	<tr rel="divorceDetails">		<td class="question"><label for="datedivorce"><span class="accessibility">If Divorced:</span> Date of divorce</label></td>		<td><input name="datedivorce" id="datedivorce" /></td>	</tr>	<tr rel="divorceDetails">		<td class="question"><label for="typedivorce"><span class="accessibility">If Divorced:</span> Type of divorce</label></td>		<td>			<select name="typedivorce" id="typedivorce">				<option value="messy" rel="none"> Messy</option>				<option value="very_messy" rel="details"> Very messy</option>			</select>		</td>	</tr>	<tr rel="details">		<td class="question"><label for="gory_details"><span class="accessibility">If Very Messy:</span> Gory details 1</label></td>		<td><input name="gory_details" id="gory_details" /></td>	</tr>	<tr>		<td class="question"><label for="why_fill_form">Why do you fill out this form?</label></td>		<td>			<select name="why_fill_form" id="why_fill_form">				<option rel="none">Select</option>				<option rel="feeling" value="just_feeling">Just a feeling</option>				<option rel="none" value="cogent_reasons">For cogent reasons</option>			</select>		</td>	</tr>	<tr rel="feeling">		<td class="question"><label for="feeling_excessive_detail"><span class="accessibility">If Just a Feeling:</span> Please describe this feeling in excessive detail.</label></td>		<td><textarea name="feeling_excessive_detail" id="feeling_excessive_detail"></textarea></td>	</tr>	<tr rel="details">		<td class="question"><label for="gory_details2"><span class="accessibility">If Very Messy:</span> Gory details 2</label></td>		<td><input name="gory_details2" id="gory_details2" /></td>	</tr>	<tr>		<td colspan="2"><input type="submit" value="Submit form" /></td>	</tr></tbody></table></form><h3>Downloads</h3><p>There are three versions available; I explain the exact differences <a href="#diffs" class="page">below on this page</a>:</p><ol>	<li><a href="usableforms.js">Version 2.0</a>. If you don't know the script, use this	version.</li>	<li><a href="usableforms_15.js">Version 1.5</a>. The same as 2.0, except that it's backwards	compatible with version 1.0</li>	<li class="smaller"><a href="usableforms_10.js">Version 1.0</a>. The original version discussed in my article.	I advise you to use one of the newer versions; this one is only maintained for historical reasons.</li></ol><p>This is the only script on my site that contains a copyright notice, because it's more special and ground-breakingthan any of my other scripts. You may do whatever you like with it, as long as this copyright notice remains intact.If you extend the script, please also extend the notice to explain what you've done.</p><h3>Instructions for version 2.0</h3><p>To use Usable Forms, do the following:</p><h4>Step 1: Download the script</h4><p>Download <a href="usableforms.js">the script</a>. Include it in any page you want to use it in:</p><pre>&lt;script type="text/javascript" src="/correct/path/usableforms.js"&gt;&lt;/script&gt;</pre><h4>Step 2: Create the form</h4><p>Create the form while following these guidelines:<br />Any form field/label combo that should be hidden, should reside in a container tag, most likelya <code>tr</code> or a <code>div</code>. It's this container tag that will be shown or hiddenwhen the user takes action. Of course all container tags should be the same HTML element: thescript searches through these container tags for the <code>rel</code> attributes I explain below.</p><p>Example with <code>tr</code>s as container tag:</p><pre><strong>&lt;tr&gt;</strong>	&lt;td class="question"&gt;&lt;label for="country_other"&gt;Country&lt;/label&gt;&lt;/td&gt;	&lt;td&gt;		&lt;input type="checkbox" name="country_other" id="country_other" rel="other_country" /&gt;			Other than The Netherlands	&lt;/td&gt;<strong>&lt;/tr&gt;</strong><strong>&lt;tr rel="other_country"&gt;</strong>	&lt;td class="question"&gt;&lt;label for="other_country"&gt;		&lt;span class="accessibility"&gt;If not the Netherlands:&lt;/span&gt; Which other country?&lt;/label&gt;&lt;/td&gt;	&lt;td&gt;&lt;input name="other_country" id="other_country" /&gt;&lt;/td&gt;<strong>&lt;/tr&gt;</strong><strong>&lt;tr&gt;</strong>	&lt;td class="question"&gt;Marital status&lt;/td&gt;	&lt;td&gt;		&lt;input type="radio" name="marital" value="single" rel="none" id="marital_single" /&gt;			&lt;label for="marital_single"&gt;Single&lt;/label&gt;&lt;br /&gt;		&lt;input type="radio" name="marital" value="married" rel="marriageContract" id="marital_married" /&gt;			&lt;label for="marital_married"&gt;Married&lt;/label&gt;&lt;br /&gt;		&lt;input type="radio" name="marital" value="divorced" rel="divorceDetails" id="marital_divorced" /&gt;			&lt;label for="marital_divorced"&gt;Divorced&lt;/label&gt;&lt;br /&gt;	&lt;/td&gt;<strong>&lt;/tr&gt;</strong><strong>&lt;tr rel="marriageContract"&gt;</strong>	&lt;td class="question"&gt;&lt;label for="marriage_contract"&gt;		&lt;span class="accessibility"&gt;If Married:&lt;/span&gt; Marriage contract?&lt;/label&gt;&lt;/td&gt;	&lt;td&gt;&lt;input type="checkbox" name="marriage_contract" id="marriage_contract" /&gt; Yes&lt;/td&gt;&lt;/tr&gt;</pre><h4>Step 3: Define the container tag</h4><p>In the first line of the script, enter the UPPER CASE tag name of the container tag. Only these tags will be shown and hidden by the script.</p><pre>var containerTag = 'TR';</pre><h4>Step 4: Create the interaction</h4><p>Decide which user actions should reveal which form fields. Now add <code>rel</code> attributeswith the same values to the form fields and to the container tags that should be revealed when theuser selects/checks this form field.</p><p>Example:</p><pre>&lt;input type="checkbox" <strong>rel="other_country"</strong> name="country_other" id="country_other" /&gt;	Other than The Netherlands&lt;tr <strong>rel="other_country"</strong>&gt;	&lt;td class="question"&gt;&lt;label for="other_country"&gt;		&lt;span class="accessibility"&gt;If not the Netherlands:&lt;/span&gt; Which other country?&lt;/label&gt;&lt;/td&gt;	&lt;td&gt;&lt;input name="other_country" id="other_country" /&gt;&lt;/td&gt;&lt;/tr&gt;</pre><h4>Step 5: Related radios and options</h4><p>When you add <code>rel</code> attributes to radio buttons or options, give<strong>all</strong> other radios or options in the same group a <code>rel="none"</code>. Although theyshouldn't show any new form fields, any form fields related to another radio or option should be hidden when theuser clicks on them, and the script needs a <code>rel</code> attribute to trigger that behaviour.</p><p>Example:</p><pre>&lt;input type="radio" name="marital" value="single" <strong>rel="none"</strong> id="marital_single" /&gt;	&lt;label for="marital_single"&gt;Single&lt;/label&gt;&lt;br /&gt;&lt;input type="radio" name="marital" value="married" rel="marriageContract" id="marital_married" /&gt;	&lt;label for="marital_married"&gt;Married&lt;/label&gt;&lt;br /&gt;&lt;input type="radio" name="marital" value="divorced" rel="divorceDetails" id="marital_divorced" /&gt;	&lt;label for="marital_divorced"&gt;Divorced&lt;/label&gt;&lt;br /&gt;</pre><h4>Step 6: Accessibility</h4><p>Users without (sufficient) JavaScript will see the entire form, including any fields that you'd prefer tohide. These users will probably need an extra bit of guidance in the form of help texts.You can add elements with <code>class="accessibility"</code> to your form. If thescript works, these elements are automatically hidden. Thus you can create extra textsthat are only visible to noscript users.</p><p>Example:</p><pre>&lt;label for="other_country"&gt;<strong>&lt;span class="accessibility"&gt;If not the Netherlands:&lt;/span&gt;</strong>	Which other country?&lt;/label&gt;</pre><h3 id="diffs">Version notes</h3><p>Version 1.0 was the original script I wrote in May 2003. In November 2005 I updated the script,and I created two new versions, 1.5 and 2.0 . The only difference is that 1.5 is completely backwardcompatible, and 2.0 isn't. Below the differences are summarized.</p><h4>Versions 1.0 and 1.5 vs. version 2.0</h4><table cellspacing="7">	<tr class="compheader">		<th>Version 1.0 and 1.5</th>		<th>Version 2.0</th>	</tr>	<tr>		<td>Searches for <code>show</code> attributes on form fields.</td>		<td>Searches for <code>rel</code> attributes on form fields.</td>	</tr>	<tr>		<td>Searches for <code>relation</code> attributes on container tags.</td>		<td>Searches for <code>rel</code> attributes on container tags.</td>	</tr></table><h4>Version 1.0 vs. versions 1.5 and 2.0</h4><table cellspacing="7">	<tr class="compheader">		<th>Version 1.0</th>		<th>Version 1.5 and 2.0</th>	</tr>	<tr>		<td><p>Needs an HTML "waiting room" structure.</p></td>		<td><p>Waiting room no longer needed. The hidden form fields are stored in a JavaScript array.</p></td>	</tr>	<tr>		<td><p>Does not work when the user clicks on a <code>label</code>.</p></td>		<td><p>Works when the user clicks on a <code>label</code>.</p></td>	</tr>	<tr>		<td><p>Hidden elements revealed with one form action always appear at the place the		first element was included in the HTML.</p></td>		<td><p>Hidden elements revealed with one form action appear at the place they themselves		were included in the HTML.</p></td>	</tr>	<tr>		<td><p>Explorer bug: relation names may not be the same as names of a form field.</p></td>		<td><p>Bug solved.</p></td>	</tr>	<tr>		<td><p><code>change</code> events defined on <code>select</code>s by the form creator		were overwritten.</p></td>		<td><p><code>change</code> events are no longer touched.</p></td>	</tr>	<tr>		<td><p>Stores hidden form fields in an HTML waiting room. The hidden fields are still in		the document.</p></td>		<td><p>Stores hidden form fields in a <code>div</code> element that's not attached to		the main document. The hidden fields "float in hyperspace".</p></td>	</tr>	<tr>		<td><p>Repeatedly loops through all container tags.</p></td>		<td><p>Loops through the container tags only once.</p></td>	</tr></table><div id="footer"><a href="https://www.quirksmode.org/home.html">Home</a> <a href="https://www.quirksmode.org/sitemap.html">Sitemap</a><p class="smaller" id="validation">Invalid XHTML 1.0 because of the <code>rel</code> attributes.</p></div></body>
<!-- Mirrored from www.quirksmode.org/dom/usableforms.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 22 Sep 2017 17:30:10 GMT -->
</html>